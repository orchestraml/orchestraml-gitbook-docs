# Code Block

## TODO

Third type of Code Block:&#x20;



Model Serving Code

Inputs: Features + Trained Algorithm

Outputs: Labels / Predictions

## Overview

* How to best save information about WHERE the code block can be executed?  We are running into the challenge of how to&#x20;
* there is a flag called runnable that is set by orchestra that is set by orchestra at the time of saving the code block.  we may not have all the run time environments + we may not have access to the runtime environment.



Talk about how every code block must be accompanied by a runtimeEnvironment.\
Talk about how it can or can't be runnable.



Each Code Block has a definition (configuration) and then a snapshot is saved every time the code is executed to persist outputs.

## Details

### Run

These properties are captured for each Run of the Code Block.

Orchestra is aware of an execution if either of the following scenarios:

1. `orchestralib` is called from within the [.](./ "mention")
2. Orchestra is configured with a [runtime-provider.md](../runtime-provider.md "mention") that is aware of the [.](./ "mention")execution\


2\)  the [.](./ "mention")is executing within a&#x20;



| Property                                   | Details                                                                                                                                                                                                                                                                               |
| ------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `inputs`                                   | <p><strong>What inputs were provided to the code?</strong>  <br><strong></strong><br><strong></strong>Defined differently for <a href="model-training-code.md">Algorithm Training Code</a> and <a href="data-code.md">Feature Engineering Code</a>.</p>                               |
| `outputs`                                  | <p><strong>What outputs were produced by the code?</strong>  <br><strong></strong><br><strong></strong>Defined differently for <a href="model-training-code.md">Algorithm Training Code</a> and <a href="data-code.md">Feature Engineering Code</a>.</p>                              |
| `runtime`                                  | The [runtime-context.md](../runtime-context.md "mention")in which this Run of this [.](./ "mention") was executed.                                                                                                                                                                    |
| `metadata[{key: value}, {key:value}, ...]` | <p>Captured metadata about the Run's Runtime, for example timestamp, duration of run, # of VCPU hours used, etc.  Key:Value pairs are saved as specified by the <a data-mention href="../runtime-type/">runtime-type</a>. <br><br>TODO(figure out what is or isn't possible here)</p> |

### Properties

These properties are specified once per code block and do not change for separate runs of the code block.

| Property                  | Details                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Name & ID`               | Defined in [name-and-description.md](../../shared-attributes/name-and-description.md "mention")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `runs[]`                  | Array of every [runtime-context.md](../runtime-context.md "mention") object for this code.  A [runtime-context.md](../runtime-context.md "mention") is created every time that this [.](./ "mention")is executed and Orchestra is aware of the execution (details).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ~~`runnable`~~            | <p><del><strong>Can Orchestra natively request this <code>Code</code> to be executed through a</strong></del> <a data-mention href="../runtime-context.md">runtime-context.md</a><del><strong>?</strong></del><br><del><strong></strong></del><br><del><strong></strong>Output only.  For each combination of runtime[]  and codeLocation, Orchestra makes a determination if Orchestra can request this</del> <a data-mention href="./">.</a><del>to be executed or not.</del></p><p><del><code></code></del><br><del><code>true</code> if Orchestra has sufficient metadata about this Code block and has a</del> <a href="../runtime-type/"><del><code>Runtime Provider</code></del></a> <del>(as defined by an Integration with type==<code>Orchestration</code> ).  An example would be an Airflow pipeline coupled with an integration to Airflow itself or a Docker container coupled with a Kubernetes environment.</del><br><del></del><br><del><code>false</code> otherwise.  Orchestra is just aware of the code's location, but can't execute it.  An example would be a pointer to lines 30 - 75 in a Git commit.</del></p> |
| ~~runtime\[]~~            | [runtime-context.md](../runtime-context.md "mention")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `supportedRuntimeTypes[]` | <p><del><strong>Where can this code be run?</strong></del><br><del><strong></strong></del><br><del><strong></strong>One or more</del> <a data-mention href="../runtime-type/">runtime-type</a><del>(s) that support executing this code block.</del>  <br><del></del><br><del>Some types enable Orchestra to request the execution, while other only provide metadata about an execution that was s</del>tarted outside of Orchestra.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `codeLocation`            | <p><strong>Where is the code stored?</strong><br><strong></strong><br><strong>TODO</strong>: Define how to capture the location of the code. Should support Git (repo, file name(s), code lines), non-Git (e.g., a statement that it was from a local file optionally with the ability to capture the code), etc.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
