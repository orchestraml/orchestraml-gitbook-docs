# log\_features()

Logs Features in Orchestra for external datasources that are read to or written from within a Code Block.

&#x20;This function call is used in two circumstances

1. to log input Features and their datasource, after they are READ
2. to log output Features and their datasource, after they are WRITTEN

### &#x20;Log input features that were READ

Usage:

```python
orchestra.log_features(df, 
    datasource='datasource_string', 
    input_for='codeblock_name')
```

Outcomes:

* The external datasource identified by `datasource_string` is logged as a datasource in Orchestra (if it doesn't already exist)
* The pandas dataframe `df` is logged as an in-memory datasource in Orchestra
* `df.columns` are used to define the Features of both the in-memory and external datasources in Orchestra (if they don't already exist in the external datasource)
* The Features of `df` are identified as being `passedFrom` the datasource `datasource_string`, and the codeblock `codeblock_name`
* The external datasource `datasource_string` is logged under the `inputFeatures` of the codeblock `codeblock_name`

### Log output features that were WRITTEN

Usage:

```python
orchestra.log_features(df, 
    datasource='datasource_string', 
    output_for='codeblock_name')
```

Outcomes:

* The external datasource identified by `datasource_string` is logged as a datasource in Orchestra (if it doesn't already exist)
* The Features of `df` (and their lineage) that are were logged previously in Orchestra are propagated to the corresponding Features in `datasource_string`
* The external datasource `datasource_string` is logged under the `outputFeatures` of the codeblock `codeblock_name`

| Arguments        | Type             | Details                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ---------------- | ---------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dataobj`        | pandas.DataFrame | <p>(Required)  </p><p>In-memory datasource that contains the data from the external datasource (referenced by the <code>datasource</code> argument). </p><p><code>dataobj.columns</code> are used to log the Features in Orchestra for both </p><ul><li><code>dataobj</code> itself</li><li>the external datasource referenced by the <code>datasource</code> argument </li></ul><p>Orchestra will either </p><ul><li>log the Features of <code>dataobj</code> as being <code>passedFrom</code> the external <code>datasource</code> (if the <code>input_for</code> parameter is populated). OR</li><li>log the Features of the external <code>datasource</code> using the Features from <code>dataobj</code> (if the <code>output_for</code> parameter is populated). Note that the Features of <code>dataobj</code> may already have <code>passedFrom</code> or <code>createdUsing</code> attributes from earlier points in the pipeline.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `connection_obj` | str              | <p>(Optional)<br>String that may be used to connect to the external 'datasource' (for example a string defining a SQL query).<br>Defaults to None.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `datasource`     | str              | <p>(Optional)<br>String defining the external datasource<br>whose data was read from / written to the <code>dataobj</code>. </p><p>Acceptable formats: </p><p><code>'s3://&#x3C;bucket_name>/&#x3C;path_to_file>'</code></p><ul><li>Orchestra will infer <code>dataprovider</code> is <code>bucket_name</code> and of type <code>S3</code> </li></ul><p></p><p><code>'gs://&#x3C;bucket_name>/&#x3C;path_to_file>'</code></p><ul><li>Orchestra will infer <code>dataprovider</code> is <code>bucket_name</code> and of type <code>GCS</code> </li></ul><p><code>'bigquery://&#x3C;project_name>.&#x3C;dataset_name>.&#x3C;table_name>'</code> </p><ul><li>Orchestra will infer <code>dataprovider</code> is <code>project_name</code> and of type <code>BigQuery</code></li></ul><p><code>/path/to/file/filename'</code></p><ul><li>Orchestra will infer <code>dataprovider</code> is <code>/path/to/file/</code> and of type <code>filesystem</code></li></ul><p><code>'dynamodb://test_table'</code></p><ul><li>Orchestra will infer <code>dataprovider</code> is <code>test_table</code> and of type <code>dynamodb</code> </li></ul><p></p><p><code>'http://url_to_file'</code></p><p>OR</p><p><code>'https://url_to_file'</code></p><ul><li>Orchestra will infer <code>dataprovider</code> is <code>url_to_file</code> and of type <code>Web Endpoint</code> </li></ul><p>Defaults to None.</p><p></p><p>Note: A string provided in any other format will be stored verbatim to Orchestra, without any automated parsing of the <code>dataprovider</code> or its <code>type</code>.</p> |
| `dataprovider`   | str              | <p>(Optional)<br>String providing the name of the <code>dataprovider</code> for the given <code>datasource</code>. Is automatically parsed from the <code>datasource</code> if it follows the <code>S3</code>, <code>BigQuery</code>, <code>GCS</code>, <code>DynamoDB</code>, <code>Web Endpoint</code> or <code>filesystem</code> formats.<br>Defaults to None.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `input_for`      | str              | <p>(Optional)<br>A string providing the name of the Orchestra <code>codeblock</code> to log the given Features as input for. Orchestra will log Features from <code>datasource</code> (which were obtained from<code>dataobj.columns</code>) as inputs to the given <code>codeblock</code>.<br>Defaults to None.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `output_for`     | str              | <p>(Optional)</p><p>A string providing the name of the Orchestra <code>codeblock</code> to log the given Features as output for. Orchestra will also propagate the content of the in-memory Features from <code>dataobj</code> to the Features of the output <code>datasource</code>.<br>Defaults to None.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `tags`           | str              | <p>(Optional)</p><p>User-defined key-value pairs. Can be used to track any additional attributes or metrics.<br>Defaults to None.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `desc`           | str              | <p>(Optional)<br>User-supplied description.<br>Defaults to None.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

####
